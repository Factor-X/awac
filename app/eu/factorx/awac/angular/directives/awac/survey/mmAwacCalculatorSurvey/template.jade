div
    div(ng-hide='$root.hideHeader()')
        .survey-header
            // user block
            table.survey-header-option
                tr
                    td(rowspan=2)
                        .wallonie_logo
                    td(rowspan=2)
                        .awac_logo
                    td.wide.align-left
                        .calculateur_type(ng-bind-html='\'TITLE_ENTERPRISE\' | translate', ng-show="$root.instanceName == 'enterprise'")
                        .calculateur_type(ng-bind-html='\'TITLE_MUNICIPALITY\' | translate', ng-show="$root.instanceName == 'municipality'")

                    td
                        div
                            select(ng-options='l.value as l.label for l in $root.languages', ng-model='$root.language')
                    td
                        div(ng-bind-html="'SURVEY_INTERFACE_MANAGEMENT' | translate")
                    td
                        div(ng-show='$root.currentPerson!=null')
                            span(ng-bind-html='\'WELCOME\' | translate')
                            | ,
                            span.username {{$root.currentPerson.firstName}} {{$root.currentPerson.lastName}}
                        div(ng-show='$root.currentPerson==null') Your are currently not connected
                tr
                    td
                        .entreprise_name {{ $root.organizationName }}

                    td
                        button.button.confidentiality(type='button', mm-not-implemented='mm-not-implemented', ng-bind-html="'SURVEY_INTERFACE_CONFIDENTIALITY' | translate")
                        button.button.help(
                            type='button',
                            ng-bind-html="'SURVEY_INTERFACE_ASSISTANCE' | translate",
                            ng-click="return false; $root.showHelp()",
                            mm-not-implemented='mm-not-implemented'
                        )
                    td
                        //  organization manager button
                        button.button.user_manage(
                            type='button',
                            ng-bind-html='\'ORGANIZATION_MANAGER_BUTTON\' | translate',
                            ng-click='isDisabled || $root.nav(\'/organization_manager\')',
                            ng-class='{\'selected\': isMenuCurrentlySelected(\'/organization_manager\') == true}',
                            ng-disabled='$root.currentPerson.isAdmin === false')
                        //  site manager button
                        button.button.user_manage(
                            ng-show="$root.instanceName == 'enterprise'"
                            type='button',
                            ng-bind-html='\'SITE_MANAGER_BUTTON\' | translate',
                            ng-click='isDisabled || $root.nav(\'/site_manager\')',
                            ng-class='{\'selected\': isMenuCurrentlySelected(\'/site_manager\') == true}',
                            ng-disabled='$root.currentPerson.isAdmin === false')
                        // user manager button
                        button.button.user_manage(
                            type='button',
                            ng-bind-html='\'USER_MANAGER_BUTTON\' | translate',
                            ng-click='isDisabled || $root.nav(\'/user_manager\')',
                            ng-class='{\'selected\': isMenuCurrentlySelected(\'/user_manager\') == true}',
                            ng-disabled='$root.currentPerson.isAdmin === false')
                    td
                        //  user data button
                        button.button.user_manage(
                            type='button',
                            ng-bind-html='\'USER_DATA_BUTTON\' | translate',
                            ng-click='$root.nav(\'/user_data\')',
                            ng-class='{\'selected\': isMenuCurrentlySelected(\'/user_data\') == true}'
                            )
                        // logout button
                        button.button.user_manage(
                            ng-show='$root.currentPerson!=null',
                            type='button',
                            ng-click='$root.logout();',
                            ng-bind-html='\'LOGOUT_BUTTON\' | translate'
                            )
        .data_menu(ng-show='displayLittleMenu===true || displayMenu===true')
            .data_date
                div(ng-bind-html='\'PERIOD_DATA\' | translate')
                select(ng-options='p.key as p.label for p in $root.availablePeriods', ng-model='$root.periodSelectedKey')
            .big_separator(ng-show="$root.instanceName == 'enterprise'")
            .data_date_compare(ng-show="$root.instanceName == 'enterprise'")
                div(ng-bind-html="'SURVEY_INTERFACE_SELECTED_SITE' | translate")
                select(ng-options='s.scope as s.name for s in $root.mySites', ng-model='$root.scopeSelectedId')
            .big_separator
            .data_date_compare
                div(ng-bind-html="'SURVEY_INTERFACE_COMPARE_TO' | translate")
                select(ng-options='p.key as p.label for p in periodsForComparison', ng-model='$root.periodToCompare')
            .big_separator
            div(ng-show="$root.currentPerson.isAdmin == true")
                //verification button => start verification
                button.button.verification(
                    type='button',
                    ng-bind-html="'ASK_VERIFICATION' | translate",
                    ng-click="isDisabled || requestVerification()",
                    ng-show="$root.getVerificationRequestStatus()==null",
                    ng-disabled="$root.closeableForms !== true")
                //re-submit => is case of correction
                button.button.verification(
                    type='button',
                    ng-bind-html="'VERIFICATION_RE_SUBMIT_BUTTON' | translate",
                    ng-click="isDisabled || resubmitVerification()",
                    ng-show="$root.getVerificationRequestStatus()==='VERIFICATION_STATUS_CORRECTION'",
                    ng-disabled="$root.closeableForms !== true")
                //consult verificaiont => is verified
                button.button.verification(
                     type='button',
                     ng-bind-html="'SURVEY_INTERFACE_VERIFICATION_CONSULT' | translate",
                     ng-click="isDisabled || consultVerification()",
                     ng-show="$root.getVerificationRequestStatus()==='VERIFICATION_STATUS_WAIT_CUSTOMER_VERIFIED_CONFIRMATION'")
                //accept / reject validation
                button.button.verification(
                    type='button',
                    ng-bind-html="'SURVEY_INTERFACE_VERIFICATION_CONFIRM_VERIFIER' | translate",
                    ng-click="isDisabled || confirmVerifier()",
                    ng-show="$root.getVerificationRequestStatus()==='VERIFICATION_STATUS_WAIT_CUSTOMER_CONFIRMATION'")
                //cancel verification => other case
                button.button.verification(
                    type='button',
                    ng-bind-html="'VERIFICATION_CANCEL_BUTTON' | translate",
                    ng-click="isDisabled || cancelVerification()",
                    ng-show="$root.getVerificationRequestStatus()!=null && $root.getVerificationRequestStatus()!='VERIFICATION_STATUS_WAIT_CUSTOMER_VERIFIED_CONFIRMATION' && $root.getVerificationRequestStatus()!='VERIFICATION_STATUS_VERIFIED' && $root.getVerificationRequestStatus()!='VERIFICATION_STATUS_CORRECTION' && $root.getVerificationRequestStatus()!='VERIFICATION_STATUS_WAIT_CUSTOMER_CONFIRMATION'")
                //consult verification faild comment
                button.button.verification(type="button",
                    ng-click="isDisabled || consultVerificationFinalComment()",
                    ng-bind-html="'VERIFICATION_FINALIZATION_CONSULT_COMMENT' | translate",
                    ng-show="$root.getVerificationRequestStatus()==='VERIFICATION_STATUS_CORRECTION' "
                    )

                button.button.verification(type='button',
                    ng-click="isDisabled || $root.closeForms()",
                    ng-bind-html='\'UNCLOSING_FORM\' | translate',
                    ng-show="$root.closedForms")
                button.button.verification(type='button',
                    ng-disabled="$root.closeableForms !== true || ($root.getVerificationRequestStatus()!=null && $root.getVerificationRequestStatus()!='VERIFICATION_STATUS_VERIFIED') || $root.currentPerson.isAdmin !== true",
                    ng-click="isDisabled || $root.closeForms()",
                    ng-bind-html='\'CLOSING_FORM\' | translate',
                    ng-hide="$root.closedForms")

            .big_separator
            .data_save
                .last_save(ng-hide='lastSaveTime===null')
                    span(ng-bind-html='\'LAST_SAVE\' | translate')
                    br
                    | {{lastSaveTime | date: 'medium' }}
                .small_separator
                .save_button
                    button.button.save(type='button', ng-click='save()', ng-bind-html='\'SAVE_BUTTON\' | translate')

        .inject-menu

    div(class="{{getClassContent()}}",ng-view)
    .footer
